rm(list = ls())
setwd("/Users/gerhardlaimer/Desktop/mcf-fc/assignment1")
if (!require(librarian)) install.packages("librarian")
library(librarian)
shelf(tidyverse, janitor, zoo, gridExtra, seasonal, TTR,
mFilter, stargazer
)
###### Create helper functions for
# change date to the beginning of the quarter
begin_quarter <- function(df) {
df %>%
filter(DATE >= "2000-03-31") %>%
select(-1) %>%                                          # drop first column
mutate(
TIME.PERIOD = gsub("Q", "-Q", TIME.PERIOD),
TIME.PERIOD = as.yearqtr(TIME.PERIOD, format = "%Y-Q%q"),
TIME.PERIOD = as.Date(TIME.PERIOD)
)
}
# prepare data for linear model
prep_for_model <- function(df,
COVID_start = as.Date("2020-01-01"),
trim_start = "2010Q1",
trim_end   = "2024Q1",
drop_q     = c("2020Q1", "2020Q2"),
win = 4) {
df %>%
arrange(TIME.PERIOD) %>%
mutate(
unemp_sma = SMA(unemp, n = win), # simple moving average
gap       = unemp - unemp_sma,
COVID     = if_else(TIME.PERIOD >= COVID_start , 1, 0), # dummy COVID
TIME.PERIOD = as.yearqtr(TIME.PERIOD),
TIME.PERIOD = format(TIME.PERIOD, "%YQ%q")
) %>%
arrange(TIME.PERIOD) %>%
mutate(
pi_lag1      = lag(pi, 4),
pi_lag2      = lag(pi, 8),
energy_lag1  = lag(energy, 4),
imp_lag1     = lag(imp, 4)
) %>%
filter(
TIME.PERIOD >= trim_start,
TIME.PERIOD <= trim_end,
!(TIME.PERIOD %in% drop_q)
)
}
### Create the base model
lm_PC <- function(df) { lm(pi ~ gap + I(gap * COVID) + COVID + pi_e +
pi_lag1 + pi_lag2 + energy_lag1 + imp_lag1,
data = df)
}
### EURO AREA
E_pi     <- read.csv("data/EA_pi.csv")
E_unemp  <- read.csv("data/EA_unemp.csv")
E_energy <- read.csv("data/EA_energy.csv")
PSF      <- read.csv("data/PSF.csv")
IMP      <- read.csv("data/IMP.csv")
# Standardized quarter parsing
E_pi     <- begin_quarter(E_pi)
View(E_pi)
View(E_unemp)
View(E_pi)
View(E_pi)
View(E_unemp)
View(E_unemp)
View(E_pi)
View(E_unemp)
View(E_pi)
View(E_unemp)
View(E_pi)
View(E_pi)
View(IMP)
View(E_unemp)
View(E_pi)
### EURO AREA
E_pi     <- read.csv("data/EA_pi.csv")
E_unemp  <- read.csv("data/EA_unemp.csv")
E_energy <- read.csv("data/EA_energy.csv")
PSF      <- read.csv("data/PSF.csv")
IMP      <- read.csv("data/IMP.csv")
# Standardized quarter parsing
E_pi     <- begin_quarter(E_pi)
E_unemp  <- begin_quarter(E_unemp)
E_energy <- begin_quarter(E_energy)
PSF      <- begin_quarter(PSF)
IMP      <- begin_quarter(IMP)
# Join
EA <- E_pi %>%
left_join(E_energy %>% select(TIME.PERIOD, energy), by = "TIME.PERIOD") %>%
left_join(E_unemp  %>% select(TIME.PERIOD, unemp),  by = "TIME.PERIOD") %>%
left_join(PSF      %>% select(TIME.PERIOD, pi_e),   by = "TIME.PERIOD") %>%
left_join(IMP      %>% select(TIME.PERIOD, imp),    by = "TIME.PERIOD")
View(EA)
EA_model <- prep_for_model(EA)
View(EA_model)
EA_lm    <- lm_PC(EA_model)
View(EA_lm)
summary(EA_lm)
View(E_pi)
View(EA)
View(EA_lm)
View(EA)
View(EA)
EA_model <- prep_for_model(EA)
View(EA_model)
EA_lm    <- lm_PC(EA_model)
View(EA_lm)
summary(EA_lm)
source("~/Desktop/mcf-fc/assignment1/Dissecting_Inflation_Dynamics_Laimer[89].r", echo = TRUE)
source("~/Desktop/RA-TA/1_Task_SummaryStatistics/R/R_1_SummaryStats/ProcessingBLUEchip.r", echo = TRUE)
